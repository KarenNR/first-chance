<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Bootstrap Chat Example</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>

    <div class="container px-0">
        <div class="chat-container p-3 mb-4">
            <div id="chat-header" class="row m-0">
                <div class="col-1 chat-logo text-center p-3">
                    <i class="fa-solid fa-robot w-100"></i>
                </div>
                <div class="col-11">
                    <h2>Empresa</h2>
                </div>
            </div>
            <hr>
            <div id="chat-messages">
                {% for message in messages %}
                {% if message[0]==0 %}
                <div class="left-message row m-0 justify-content-start mb-2">
                    <div class="col-auto left-chat p-2">
                        <p class="mb-0">{{ message[1] }}</p>
                        <p class="text-end mb-0"><small>{{ message[2] }}</small></p>
                    </div>
                </div>
                {% else %}
                <div class="right-message row m-0 justify-content-end mb-2">
                    <div class="col-auto right-chat p-2">
                        <p class="mb-0">{{ message[1] }}</p>
                        <p class="text-end mb-0"><small>{{ message[2] }}</small></p>
                    </div>
                </div>
                {% endif %}
                {% endfor %}
            </div>
            <div id="loading">
                <div class="spinner-grow spinner-grow-sm text-primary" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
                <div class="spinner-grow spinner-grow-sm text-primary" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
                <div class="spinner-grow spinner-grow-sm text-primary" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
            </div>
        </div>
        <div class="chat-bar row m-0 px-0">
            <div class="col-10 px-0">
                <input type="text" class="w-100" placeholder="Escribe un mensaje" id="chat-input">
            </div>
            <div class="col-2 pe-0">
                <button class="primary-button w-100 chat-send" onclick="sendMessage()">
                    <i class="fa-solid fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.0.7/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script>
    // Function to add a message to the chat
    function addMessage(sender, content) {
        var messageList = document.getElementById('message-list');
        var messageItem = document.createElement('li');
        messageItem.className = 'list-group-item';
        messageItem.textContent = sender + ': ' + content;
        messageList.appendChild(messageItem);
    }

    // Function to handle sending a message
    function sendMessage() {
        var messageInput = document.getElementById('message-input');
        var messageContent = messageInput.value.trim();

        if (messageContent !== '') {
            addMessage('You', messageContent);
            messageInput.value = '';
            setTimeout(receiveMessage, 1000); // Simulate receiving a message after a delay
        }
    }

    // Function to handle receiving a message
    function receiveMessage() {
        var messages = [
            { sender: 'Friend', content: 'Hi there!' },
            { sender: 'Friend', content: 'How are you?' }
        ];

        var randomMessage = messages[Math.floor(Math.random() * messages.length)];
        addMessage(randomMessage.sender, randomMessage.content);
    }

    // Add event listener for send button
    document.getElementById('send-button').addEventListener('click', sendMessage);
</script>
</body>
</html>
